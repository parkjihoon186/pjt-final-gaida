# VS-ME

## ğŸš€ í”„ë¡œì íŠ¸ ì†Œê°œ

VS-MEëŠ” ì •ì²´ê¸°ë¥¼ ê·¹ë³µí•˜ê³  ìì‹ ì˜ ìˆ˜í–‰ëŠ¥ë ¥ì„ í‚¤ì›Œê°€ê³  ì‹¶ì€ ê°œì¸ì„ ìœ„í•œ í”Œë«í¼ì…ë‹ˆë‹¤.
ìš´ë™Â·ì‹ë‹¨ë¿ë§Œ ì•„ë‹ˆë¼ ìˆ˜ë©´, ì˜ì–‘ì œ ë“± ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ììœ ë¡­ê²Œ ê¸°ë¡í•  ìˆ˜ ìˆìœ¼ë©°, AIëŠ” ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‹ ë¢°ì„± ìˆëŠ” ì„±ì¥ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.


### í•µì‹¬ ê°€ì¹˜
**ë°ì´í„° ê¸°ë¡ ìœ ì—°ì„±**
* **ìš´ë™, ì‹ë‹¨ë¿ë§Œ ì•„ë‹ˆë¼ ê°œì¸ì´ ì›í•˜ëŠ” ëª¨ë“  í•­ëª©(ì˜ˆ: ìˆ˜ë©´, ì˜ì–‘ì œ, ì»¨ë””ì…˜)ì„ jsonb í˜•ì‹ìœ¼ë¡œ ì €ì¥ ê°€ëŠ¥**
* **ê°œì¸í™”ëœ ë°ì´í„° ìŠ¤í‚¤ë§ˆë¥¼ ê°•ì œí•˜ì§€ ì•Šê³ , ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë§Œí¼ í™•ì¥ ê°€ëŠ¥**

**AI ê¸°ë°˜ ë¶„ì„ ë³´ê³ ì„œì™€ ì‹¤ì‹œê°„ ì¡°ì–¸**
* **LangGraph ê¸°ë°˜ ì—ì´ì „íŠ¸ê°€ ìì—°ì–´ ìš”ì²­(NLQ)ì„ ì´í•´í•˜ê³  ì ì ˆí•œ Toolì„ í˜¸ì¶œ**
* **GPT ëª¨ë¸ì´ ë‹¨ìˆœ ìš”ì•½ì´ ì•„ë‹ˆë¼, ê°œì¸ì˜ ëˆ„ì  ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‹ ë¢°ì„± ë†’ì€ ì „ëµì  í”¼ë“œë°± ì œê³µ**

**ë‹¨ê¸°ì  /ì¥ê¸°ì  ì„±ì¥ ë³„ë„ ë¶„ì„ ì „ëµ**
* **Chart.js ê¸°ë°˜ì˜ ìš´ë™ë³„ ë¶„ì„ ì‹œê°í™”ì™€ ë¦¬í¬íŠ¸ë¥¼ í†µí•´ ë‹¨ê¸°ì ì¸ ì„±ê³¼ì™€ ì¥ê¸°ì ì¸ ì„±ì¥ì„ ë™ì‹œì— ê´€ë¦¬**

### âœ¨ í•µì‹¬ ê¸°ëŠ¥
**AI ì½”ì¹˜ ê¸°ëŠ¥ (ì‹¤ì‹œê°„)**
* **LangGraph ê¸°ë°˜ìœ¼ë¡œ DBì—ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œ ê°€ì ¸ì™€ ì‘ë‹µ**
* **ìš´ë™/ì‹ë‹¨/ìˆ˜ë©´/ì˜ì–‘ì œ ë“± ìœ ì—°í•œ ë°ì´í„° ì…ë ¥ ì§€ì›**
* **ìì—°ì–´ ê¸°ë°˜ ê°œì¸ ë§ì¶¤ ì¡°ì–¸ ì œê³µ**

**AI ë¶„ì„ ê¸°ëŠ¥ (ë¹„ì‹¤ì‹œê°„)**
* **LLMì´ ì‚¬ìš©ìì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì§ì ‘ ë¶„ì„**
* **ê°œì¸í™” ë³´ê³ ì„œ ìƒì„± ë° ì„±ì¥ ì „ëµ ì œì•ˆ**

**ë°ì´í„° ì‹œê°í™”**
* **ìš´ë™ë³„ â€œìŠ¹ë¦¬ì˜ ì—°ëŒ€ê¸°â€ ì°¨íŠ¸ë¥¼ í†µí•´ ìˆ˜í–‰ëŠ¥ë ¥ ë³€í™” ì¶”ì„¸**
* **ìµœëŒ€ ìˆ˜í–‰ëŠ¥ë ¥ ë‹¬ì„± ìœ ë¬´ ì‹œê°í™”**

### ğŸ“Š ìš°ë¦¬ì˜ Positioning

- ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ í¬ì§€ì…˜ì€ **â€œì¦‰ê°ì„±ë³´ë‹¤ íƒ€ë‹¹ì„±, ê¸°ë¡ í¸ì˜ì„±ë³´ë‹¤ ì½˜í…ì¸  ë‹¤ì–‘ì„±â€**ì…ë‹ˆë‹¤.

```mermaid
quadrantChart
    title Service Positioning Matrix
    x-axis Immediacy --> Analytical_Rigor
    y-axis Recording_Convenience --> Content_Diversity
    
    "ìš°ë¦¬ ì„œë¹„ìŠ¤": [0.9, 0.8]
    "GPT": [0.25, 0.9]
    "ë©”ëª¨ ì•±": [0.15, 0.2]
    "ë…¸ì…˜": [0.35, 0.4]
    "í—¬ìŠ¤ì¥ PT": [0.75, 0.25]
```


- ì¦‰, GPTëŠ” ë¹ ë¥´ê³  ì¦‰ê°ì ì¸ ì‘ë‹µì— ê°•ì ì´ ìˆëŠ” ë°˜ë©´,
- ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ” ì¶©ë¶„í•œ ë°ì´í„°ë¥¼ ëª¨ìœ¼ê³  ë¶„ì„í•˜ì—¬ ê°œì¸ì˜ ì„±ì¥ì— íƒ€ë‹¹í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ë° ì§‘ì¤‘í•©ë‹ˆë‹¤.

### âš ï¸ UX ê´€ì 
- ìš°ë¦¬ ì„œë¹„ìŠ¤ì˜ UIëŠ” ì§ê´€ì ì´ê±°ë‚˜ ë‹¨ìˆœí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ê·¸ëŸ¬ë‚˜ ì´ëŠ” ë‹¨ìˆœ ê¸°ë¡ ë„êµ¬ê°€ ì•„ë‹ˆë¼, ì„±ì¥ ì§€í–¥ì  ë¶„ì„ í”Œë«í¼ì´ë¼ëŠ” í¬ì§€ì…˜ì„ ê°•í™”í•©ë‹ˆë‹¤.

ğŸ‘‰ ìš”ì•½í•˜ìë©´, **â€œë‚´ê°€ ë„£ê³  ì‹¶ì€ ëª¨ë“  ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, GPTê°€ ì£¼ì§€ ëª»í•˜ëŠ” íƒ€ë‹¹ì„± ìˆëŠ” ì„±ì¥ í”¼ë“œë°±ì„ ì£¼ëŠ” ì„œë¹„ìŠ¤â€**ì…ë‹ˆë‹¤.

## ğŸ›ï¸ ì•„í‚¤í…ì²˜ (Architecture)

ë³¸ í”„ë¡œì íŠ¸ëŠ” **ë‹¨ì¼ FastAPI ë°±ì—”ë“œ** êµ¬ì¡°ë¥¼ ì±„íƒí•˜ì—¬ ì›¹ ì„œë¹„ìŠ¤ì™€ AI ì—ì´ì „íŠ¸ ê¸°ëŠ¥ì„ í†µí•© ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í•˜ê³ , ë°°í¬ ë° ìœ ì§€ë³´ìˆ˜ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í–ˆìŠµë‹ˆë‹¤.

* **FastAPI (Python) ë°±ì—”ë“œ**
  * ì •ì  íŒŒì¼(index.html, CSS, JS ë“±) ì„œë¹™
  * Supabase ì—°ë™ RESTful API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ (`/api/sessions`, `/api/nutrition` ë“±) 
  * AI ì½”ì¹­ ì—”ë“œí¬ì¸íŠ¸:
    * `/api/coach`: ì§ì ‘ GPT í˜¸ì¶œ ë°©ì‹ (ì‚¬ì „ ë°ì´í„° ì¡°íšŒ í›„ ë‹¨ì¼ ì‘ë‹µ)
    * `/api/agent/invoke`: LangGraph ê¸°ë°˜ ì—ì´ì „íŠ¸ (ë„êµ¬ í˜¸ì¶œ ë° ë°˜ë³µì  ì¶”ë¡ )

* **Supabase (DB + ì¸ì¦/ë³´ì•ˆ ë ˆì´ì–´)**
  * ëª¨ë“  ë°ì´í„°ëŠ” `jsonb` í˜•íƒœë¡œ ìœ ì—°í•˜ê²Œ ì €ì¥
  * Row Level Security(RLS) ì •ì±…ì„ í†µí•´ ì‚¬ìš©ìë³„ ë°ì´í„° ì ‘ê·¼ ì œì–´



### data-flow

#### total-data-flow
```mermaid
graph LR
    subgraph Input["Input Layer"]
        direction TB
        NLQ["Natural Language Query<br/>question: str<br/>ì˜ˆ: 'ì§€ë‚œì£¼ ìš´ë™ëŸ‰ ë¶„ì„í•´ì¤˜'"]
        DIR["Direct Data Request<br/>user_id: text<br/>ì˜ˆ: 'user123'"]
    end
    
    subgraph Frontend["Frontend Layer"]
        direction TB
        REQ_Agent["Agent Request<br/>POST /api/agent/invoke"]
        REQ_Direct["Direct Request<br/>POST /api/coach"]
    end
    
    subgraph Backend["Backend Layer (FastAPI Unified Server)"]
        direction TB
        FASTAPI["FastAPI Server<br/>ë‹¨ì¼ ì§„ì…ì "]
        
        subgraph DirectPath["Direct Flow Path (Simple)"]
            ROUTER_Direct["Coach Router"]
            PROCESS_Direct["Direct Processing<br/>â€¢ Fetch DB data<br/>â€¢ Build prompt<br/>â€¢ Single GPT call"]
        end
        
        subgraph AgentPath["Agent Flow Path (Complex)"]
            ROUTER_Agent["Agent Router"]
            
            subgraph LangGraph["LangGraph Engine"]
                direction TB
                STATE["State<br/>Management"]
                DECISION["Agent<br/>Decision<br/>(GPT 1ì°¨)"]
                EXECUTOR["Tool<br/>Executor"]
                PROCESSOR["Result<br/>Processor<br/>(GPT ìµœì¢…)"]
            end
        end
        
        TOOLS["Supabase Tools<br/>â€¢ get_workout_history()<br/>â€¢ get_nutrition_data()<br/>â€¢ add_workout_session()"]
    end
    
    subgraph Database["Database Layer (Supabase)"]
        direction TB
        SESSIONS["sessions table"]
        NUTRITION["nutrition table"]
    end
    
    subgraph AI["AI Layer"]
        direction TB
        GPT["OpenAI GPT Model"]
    end
    
    subgraph Output["Output Layer"]
        direction TB
        RESPONSE_Direct["Direct Response<br/>{ advice: string }"]
        RESPONSE_Agent["Agent Response<br/>{ answer: string, tool_outputs: array }"]
    end
    
    %% Input to Frontend
    NLQ --> REQ_Agent
    DIR --> REQ_Direct
    
    %% Frontend to Backend
    REQ_Agent --> FASTAPI
    REQ_Direct --> FASTAPI
    
    %% FastAPI Routing
    FASTAPI --> ROUTER_Agent
    FASTAPI --> ROUTER_Direct
    
    %% Direct Flow (Blue Path)
    ROUTER_Direct --> PROCESS_Direct
    PROCESS_Direct --> SESSIONS
    PROCESS_Direct --> NUTRITION
    SESSIONS -.->|ë°ì´í„° ë°˜í™˜| PROCESS_Direct
    NUTRITION -.->|ë°ì´í„° ë°˜í™˜| PROCESS_Direct
    PROCESS_Direct --> GPT
    GPT -.->|ì¡°ì–¸ ìƒì„±| PROCESS_Direct
    PROCESS_Direct --> RESPONSE_Direct
    
    %% Agent Flow (Green Path)
    ROUTER_Agent --> STATE
    STATE --> DECISION
    DECISION --> EXECUTOR
    EXECUTOR --> TOOLS
    EXECUTOR --> PROCESSOR
    TOOLS --> SESSIONS
    TOOLS --> NUTRITION
    SESSIONS -.->|ë°ì´í„° ë°˜í™˜| EXECUTOR
    NUTRITION -.->|ë°ì´í„° ë°˜í™˜| EXECUTOR
    PROCESSOR -.->|ì¶”ê°€ ë¶„ì„| STATE
    DECISION <--> GPT
    PROCESSOR <--> GPT
    PROCESSOR --> RESPONSE_Agent
    
    %% Output
    FASTAPI --> RESPONSE_Direct
    FASTAPI --> RESPONSE_Agent
    
    %% Styling
    classDef input fill:#fff9c4,stroke:#f57f17,stroke-width:3px,color:#000
    classDef frontend fill:#ffe082,stroke:#f57f17,stroke-width:2px,color:#000
    classDef fastapi fill:#9c27b0,stroke:#4a148c,stroke-width:3px,color:#fff
    classDef directFlow fill:#42a5f5,stroke:#0d47a1,stroke-width:2px,color:#000
    classDef agentFlow fill:#66bb6a,stroke:#1b5e20,stroke-width:2px,color:#000
    classDef langgraph fill:#4caf50,stroke:#1b5e20,stroke-width:2px,color:#fff
    classDef tools fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef database fill:#ff9800,stroke:#e65100,stroke-width:2px,color:#000
    classDef ai fill:#e91e63,stroke:#880e4f,stroke-width:2px,color:#fff
    classDef output fill:#607d8b,stroke:#263238,stroke-width:3px,color:#fff
    
    class NLQ,DIR input
    class REQ_Agent,REQ_Direct frontend
    class FASTAPI fastapi
    class ROUTER_Direct,PROCESS_Direct directFlow
    class ROUTER_Agent agentFlow
    class STATE,DECISION,EXECUTOR,PROCESSOR langgraph
    class TOOLS tools
    class SESSIONS,NUTRITION database
    class GPT ai
    class RESPONSE_Direct,RESPONSE_Agent output
```
#### Direct-Flow
- ì²˜ë¦¬ ë‹¨ê³„: Frontend â†’ FastAPI â†’ Router â†’ Direct Processing
```mermaid
graph LR
    subgraph Input["Input Layer"]
        direction TB
        DIR["Direct Data Request<br/>user_id: text<br/>ì˜ˆ: 'user123'"]
    end
    
    subgraph Frontend["Frontend Layer"]
        direction TB
        REQ_Direct["Direct Request<br/>fetch('/api/coach', {<br/>  user_id: text<br/>})"]
    end
    
    subgraph Backend["Backend Layer (FastAPI Unified Server)"]
        direction TB
        FASTAPI["FastAPI Server<br/>â€¢ Static File Serving<br/>â€¢ API Routing<br/>â€¢ Direct DB Access"]
        
        ROUTER["Coach Router<br/>POST /api/coach<br/>â†’ get_coaching_advice()"]
        
        WEB["Direct Processing<br/>1. Receive user_id<br/>2. Fetch data from Supabase<br/>3. Build SystemPrompt + UserPrompt<br/>4. Call GPT with pre-fetched data<br/>5. Return coaching advice"]
    end
    
    subgraph Database["Database Layer"]
        direction TB
        SESSIONS["sessions table<br/>â€¢ id: bigint (PK)<br/>â€¢ user_id: text<br/>â€¢ session_date: date<br/>â€¢ total_volume: numeric<br/>â€¢ exercises: jsonb"]
        
        NUTRITION["nutrition table<br/>â€¢ id: bigint (PK)<br/>â€¢ user_id: text<br/>â€¢ meal_date: date<br/>â€¢ carbs: numeric<br/>â€¢ protein: numeric<br/>â€¢ fat: numeric"]
    end
    
    subgraph AI["AI Layer"]
        direction TB
        GPT["OpenAI GPT Model<br/>ë‹¨ì¼ í˜¸ì¶œ<br/>Input: SystemPrompt + UserPrompt + DB Data<br/>Output: Coaching advice text"]
    end
    
    subgraph Output["Output Layer"]
        direction TB
        RESPONSE["HTTP Response<br/>{<br/>  advice: string,<br/>  status: 'success'<br/>}"]
    end
    
    %% Direct Flow Path
    DIR --> REQ_Direct
    REQ_Direct --> FASTAPI
    FASTAPI --> ROUTER
    ROUTER --> WEB
    
    %% Database Access
    WEB --> SESSIONS
    WEB --> NUTRITION
    SESSIONS -.->|ë°ì´í„° ë°˜í™˜| WEB
    NUTRITION -.->|ë°ì´í„° ë°˜í™˜| WEB
    
    %% AI Processing
    WEB --> GPT
    GPT -.->|ì¡°ì–¸ ìƒì„±| WEB
    
    %% Output Flow
    WEB --> RESPONSE
    FASTAPI --> RESPONSE
    
    %% Styling
    classDef input fill:#90caf9,stroke:#0d47a1,stroke-width:3px,color:#000
    classDef frontend fill:#64b5f6,stroke:#0d47a1,stroke-width:2px,color:#000
    classDef backend fill:#42a5f5,stroke:#1565c0,stroke-width:2px,color:#000
    classDef database fill:#2196f3,stroke:#0d47a1,stroke-width:2px,color:#fff
    classDef ai fill:#1976d2,stroke:#0d47a1,stroke-width:2px,color:#fff
    classDef output fill:#0d47a1,stroke:#000,stroke-width:3px,color:#fff
    
    class DIR input
    class REQ_Direct frontend
    class FASTAPI,ROUTER,WEB backend
    class SESSIONS,NUTRITION database
    class GPT ai
    class RESPONSE output
```
#### Agent-Flow
## Agent Flow (LangGraph ê¸°ë°˜ AI ì—ì´ì „íŠ¸)

### ì²˜ë¦¬ ë‹¨ê³„
- **Input â†’ Frontend â†’ FastAPI Router â†’ LangGraph State Management â†’ Agent Decision â†’ Tool Execution â†’ Database**
- State â†” Decision â†” GPT ê°„ í”¼ë“œë°± ë£¨í”„ë¥¼ í†µí•œ ë°˜ë³µì  ì¶”ë¡ 
- ë‹¤ì¤‘ GPT í˜¸ì¶œ ê°€ëŠ¥:
  - 1ì°¨ í˜¸ì¶œ: AgentDecisionì—ì„œ ì´ˆê¸° ì˜ì‚¬ê²°ì • (tool_use ì—¬ë¶€ íŒë‹¨)
  - 2ì°¨+ í˜¸ì¶œ: Tool ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¶”ê°€ ë¶„ì„ í•„ìš” ì‹œ
  - ìµœì¢… í˜¸ì¶œ: ResultProcessorì—ì„œ ëª¨ë“  ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ìµœì¢… ë‹µë³€ ìƒì„±

### ì•„í‚¤í…ì²˜ íŠ¹ì§•
- **FastAPI ì„œë²„**: FastAPIê°€ ëª¨ë“  ìš”ì²­ ì²˜ë¦¬
- **ì§ì ‘ ì—°ê²°**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `/api/agent/invoke` ì—”ë“œí¬ì¸íŠ¸ë¡œ ì§ì ‘ LangGraph í˜¸ì¶œ
- **ìƒíƒœ ê´€ë¦¬**: TypedDict ê¸°ë°˜ Stateë¡œ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
- **ë„êµ¬ ê¸°ë°˜ ì¶”ë¡ **: Supabase Toolsë¥¼ í™œìš©í•œ ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •
```mermaid
graph LR
    subgraph Input["Input Layer"]
        direction TB
        NLQ["Natural Language Query<br/>question: str<br/>ì˜ˆ: 'ì§€ë‚œì£¼ ìš´ë™ëŸ‰ ë¶„ì„í•´ì¤˜'"]
    end
    
    subgraph Frontend["Frontend Layer"]
        direction TB
        REQ_Agent["Agent Request<br/>fetch('/api/agent/invoke', {<br/>  question: str,<br/>  user_id: text<br/>})"]
    end
    
    subgraph Backend["Backend Layer (FastAPI Unified Server)"]
        direction TB
        FASTAPI["FastAPI Server<br/>â€¢ Static File Serving<br/>â€¢ API Routing<br/>â€¢ LangGraph Integration"]
        
        ROUTER["Agent Router<br/>POST /api/agent/invoke<br/>â†’ graph.invoke()"]
        
        subgraph LangGraph["LangGraph Engine"]
            direction TB
            STATE["State Management<br/>(TypedDict)<br/>â€¢ question: str<br/>â€¢ user_id: text<br/>â€¢ decision: AgentDecisionModel<br/>â€¢ tool_outputs: List[ToolMessage]<br/>â€¢ answer: str"]
            
            DECISION["AgentDecision Node<br/>(Pydantic Model)<br/>â€¢ action_type: 'tool_use' | 'final_answer'<br/>â€¢ tool_calls: List[dict]<br/>â€¢ final_answer: str<br/><br/>GPT 1ì°¨ í˜¸ì¶œ: ì˜ì‚¬ê²°ì •"]
            
            EXECUTOR["ToolExecutor Node<br/>1. Parse tool_calls<br/>2. Execute supabase_tools<br/>3. Collect ToolMessages"]
            
            PROCESSOR["ResultProcessor Node<br/>1. Update state with results<br/>2. Determine next action<br/>3. Generate final answer<br/><br/>GPT ìµœì¢… í˜¸ì¶œ: ë‹µë³€ ìƒì„±"]
        end
        
        TOOLS["Supabase Tools<br/>Functions:<br/>â€¢ get_workout_history()<br/>â€¢ get_nutrition_data()<br/>â€¢ add_workout_session()<br/>Parameters:<br/>â€¢ user_id: text<br/>â€¢ date_filter: str (optional)<br/>â€¢ limit: int (optional)"]
    end
    
    subgraph Database["Database Layer"]
        direction TB
        SESSIONS["sessions table<br/>â€¢ id: bigint (PK)<br/>â€¢ user_id: text<br/>â€¢ session_date: date<br/>â€¢ total_volume: numeric<br/>â€¢ exercises: jsonb"]
        
        NUTRITION["nutrition table<br/>â€¢ id: bigint (PK)<br/>â€¢ user_id: text<br/>â€¢ meal_date: date<br/>â€¢ carbs: numeric<br/>â€¢ protein: numeric<br/>â€¢ fat: numeric"]
    end
    
    subgraph AI["AI Layer"]
        direction TB
        GPT["OpenAI GPT Model<br/>1ì°¨: Decision making<br/>2ì°¨+: Tool-based reasoning<br/>ìµœì¢…: Answer generation"]
    end
    
    subgraph Output["Output Layer"]
        direction TB
        RESPONSE["HTTP Response<br/>{<br/>  answer: string,<br/>  tool_outputs: array,<br/>  state: object<br/>}"]
    end
    
    %% Main Flow Path
    NLQ --> REQ_Agent
    REQ_Agent --> FASTAPI
    FASTAPI --> ROUTER
    ROUTER --> STATE
    
    %% LangGraph Internal Flow
    STATE --> DECISION
    DECISION --> EXECUTOR
    EXECUTOR --> TOOLS
    EXECUTOR --> PROCESSOR
    
    %% Database Connections
    TOOLS --> SESSIONS
    TOOLS --> NUTRITION
    SESSIONS -.->|ë°ì´í„° ë°˜í™˜| EXECUTOR
    NUTRITION -.->|ë°ì´í„° ë°˜í™˜| EXECUTOR
    
    %% Feedback Loops
    PROCESSOR -.->|ì¶”ê°€ ë¶„ì„ í•„ìš”ì‹œ| STATE
    DECISION -.->|ì§ì ‘ ë‹µë³€ ê°€ëŠ¥ì‹œ| PROCESSOR
    
    %% AI Integration
    DECISION <--> GPT
    PROCESSOR <--> GPT
    
    %% Output Flow
    PROCESSOR --> RESPONSE
    FASTAPI --> RESPONSE
    
    %% Styling
    classDef input fill:#a5d6a7,stroke:#1b5e20,stroke-width:3px,color:#000
    classDef frontend fill:#81c784,stroke:#1b5e20,stroke-width:2px,color:#000
    classDef backend fill:#66bb6a,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef langgraph fill:#4caf50,stroke:#1b5e20,stroke-width:2px,color:#fff
    classDef database fill:#43a047,stroke:#1b5e20,stroke-width:2px,color:#fff
    classDef ai fill:#2e7d32,stroke:#1b5e20,stroke-width:2px,color:#fff
    classDef output fill:#1b5e20,stroke:#000,stroke-width:3px,color:#fff
    
    class NLQ input
    class REQ_Agent frontend
    class FASTAPI,ROUTER,TOOLS backend
    class STATE,DECISION,EXECUTOR,PROCESSOR langgraph
    class SESSIONS,NUTRITION database
    class GPT ai
    class RESPONSE output
```
## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

### í”„ë¡ íŠ¸ì—”ë“œ

* **Tailwind CSS**: ì „ì²´ UI ìŠ¤íƒ€ì¼ë§ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS í”„ë ˆì„ì›Œí¬. ë°˜ì‘í˜• ë””ìì¸ê³¼ ì¼ê´€ëœ ë ˆì´ì•„ì›ƒ ì œê³µ.
* **Chart.js**: ì‚¬ìš©ìì˜ ê¸°ë¡ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê·¸ë˜í”„ ë° ì°¨íŠ¸ ì‹œê°í™”.

### ë°±ì—”ë“œ
**FastAPI (Python)**
   * **ì—­í• **: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ API ì„œë²„, LangGraph ê¸°ë°˜ ReAct ì—ì´ì „íŠ¸ API ì„œë²„.
   * **ì£¼ìš” ê¸°ëŠ¥**: ìì—°ì–´ ì§ˆì˜ ì²˜ë¦¬, Tool-Calling, ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ì‘ìš©.

### ë°ì´í„°ë² ì´ìŠ¤
* **Supabase (PostgreSQL ê¸°ë°˜)**: ì‚¬ìš©ì ìš´ë™/ì‹ë‹¨/ê¸°íƒ€ ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬. ë°±ì—”ë“œ ë° AI ì—ì´ì „íŠ¸ì—ì„œ ëª¨ë‘ ì ‘ê·¼ ê°€ëŠ¥.

### AI & ì—ì´ì „íŠ¸
* **GPT (OpenAI)**: AI ì½”ì¹˜ ë° LangGraph ì—ì´ì „íŠ¸ì˜ ë¶„ì„/í”¼ë“œë°± ìƒì„±.
* **LangGraph**: ReAct íŒ¨í„´ ê¸°ë°˜ì˜ ìƒíƒœ ê¸°ë°˜ ììœ¨ ì—ì´ì „íŠ¸ êµ¬ì¶•. `AgentDecision`, `ToolExecutor` ë…¸ë“œë¥¼ í™œìš©.
* **LangChain**: LLM, Tool, Prompt ê²°í•©ì„ í†µí•œ LangGraph ì—ì´ì „íŠ¸ ì‹¤í–‰ ê¸°ë°˜ ì œê³µ.

ì¢‹ì•„ìš”. ë§ì”€í•˜ì‹  ë‚´ìš© ë°˜ì˜í•´ì„œ **Supabase DB ì„¸íŒ… í¬í•¨**, ìˆœì„œ ì¬ì •ë¦¬ëœ **Quick Start** ì „ì²´ë¥¼ Markdown í˜•ì‹ìœ¼ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ Quick Start


### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ì„ ìƒì„±í•˜ê³ , ì•„ë˜ ë‚´ìš©ì„ ê°ìì˜ í‚¤ ê°’ìœ¼ë¡œ ì±„ì›Œì£¼ì„¸ìš”.

```env
# OpenAI API Key
OPENAI_API_KEY="YOUR_OPENAI_API_KEY"

# Supabase Credentials
SUPABASE_URL="YOUR_SUPABASE_URL"
SUPABASE_ANON_KEY="YOUR_SUPABASE_ANON_KEY"
```

---

### 2. Supabase DB ì„¸íŒ…

1. Supabase í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
2. `.env` íŒŒì¼ì— Supabase URLê³¼ Anon Keyë¥¼ ì„¤ì •í•©ë‹ˆë‹¤ (ì•„ë˜ ì°¸ì¡°).
3. `tablecreate.sql` íŒŒì¼ì— ìˆëŠ” ì¿¼ë¦¬ë¥¼ Supabase SQL Editor ë˜ëŠ” CLIë¥¼ í†µí•´ ì‹¤í–‰í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
# supabase CLI ì˜ˆì‹œ
supabase db connect
psql "postgresql://<user>:<password>@<host>:<port>/<database>" -f tablecreate.sql
```

> **ì°¸ê³ **: `tablecreate.sql`ì—ëŠ” ìš´ë™, ì‹ë‹¨, ì„¸ì…˜ ë“± í”„ë¡œì íŠ¸ì—ì„œ í•„ìš”í•œ ëª¨ë“  í…Œì´ë¸”ê³¼ ì´ˆê¸° êµ¬ì¡°ê°€ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

### 3. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰

ë³¸ í”„ë¡œì íŠ¸ëŠ” **ë‘ ê°œì˜ ë°±ì—”ë“œ ì„œë²„**ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ë‘ ì„œë²„ë¥¼ ëª¨ë‘ ì‹¤í–‰í•´ì•¼ ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

#### A. LangGraph ì—ì´ì „íŠ¸ ì„œë²„ (FastAPI)

```bash
# langgraph-agent ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd langgraph-agent

# (ì„ íƒ) Python ê°€ìƒ í™˜ê²½ ìƒì„± ë° í™œì„±í™”
# python3 -m venv venv && source venv/bin/activate

# ì¢…ì†ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ì„œë²„ ì‹¤í–‰
uvicorn graph_builder:fastapi_app --reload
```


---

### 4. í”„ë¡ íŠ¸ì—”ë“œ ì ‘ê·¼

ë‘ ì„œë²„ê°€ ëª¨ë‘ ì‹¤í–‰ëœ í›„, ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ì–´ ì•„ë˜ ì£¼ì†Œë¡œ ì ‘ì†í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
http://localhost:3000
```


### Directory structure (Before version)
```
web
.
â”œâ”€â”€ index.html
â”œâ”€â”€ node_modules
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ server.js
â””â”€â”€ tablecreate.sql

langgraph-agent
.
â”œâ”€â”€ graph_builder.py
â”œâ”€â”€ langgraph.ipynb
â”œâ”€â”€ langgraph.json
â”œâ”€â”€ langgraph.log
â”œâ”€â”€ llm-systemprompt.md
â”œâ”€â”€ node.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ state.py
â”œâ”€â”€ supabase_tools.py
â”œâ”€â”€ test_decision_to_tool_flow.py
â”œâ”€â”€ test_node.py
â”œâ”€â”€ test_state.py
â””â”€â”€ test_supabase_tools.py
```